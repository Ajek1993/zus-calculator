<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Prosty Formularz</title>
    <link rel="stylesheet" href="global.css" />
  </head>
  <body>
    <nav class="navbar">
      <img src="logo_zus_darker_with_text.svg" alt="Logo" class="logo" />
    </nav>
    <div class="retirement-expectation">
      <h2>Jaką emeryturę chciałbyś/chciałabyś otrzymywać w przyszłości?</h2>

      <label for="desired_pension" class="label"
        >Oczekiwana wysokość emerytury (PLN)</label
      >
      <input
        type="number"
        id="desired_pension"
        name="desired_pension"
        placeholder="Wpisz oczekiwaną kwotę"
      />

      <p>
        Średnia obecna wysokość emerytury:
        <strong id="average_pension_display">2500 PLN</strong>
      </p>

      <div class="chart-wrapper">
        <canvas id="pensionChart" width="400" heightght="200"></canvas>
      </div>

      <div id="group_info" class="group-info"></div>

      <div id="random_fact" class="random-fact"></div>
    </div>

    <div class="container">
      <form action="#" method="post" novalidate>
        <h2>Symulacja przyszłej emerytury</h2>

        <div class="form-group">
          <label for="age">Wiek (OBOWIĄZKOWO)</label>
          <input
            type="number"
            id="age"
            name="age"
            min="15"
            max="100"
            required
            placeholder="Wpisz wiek"
          />
        </div>

        <div class="form-group">
          <label for="gender">Płeć (OBOWIĄZKOWO)</label>
          <select id="gender" name="gender" required>
            <option value="" disabled selected>Wybierz płeć</option>
            <option value="male">Mężczyzna</option>
            <option value="female">Kobieta</option>
          </select>
        </div>

        <div class="form-group">
          <label for="gross_salary"
            >Wysokość wynagrodzenia brutto (OBOWIĄZKOWO)</label
          >
          <input
            type="number"
            id="gross_salary"
            name="gross_salary"
            min="0"
            step="0.01"
            required
            placeholder="Wpisz wynagrodzenie brutto"
          />
        </div>

        <div class="form-group">
          <label for="start_year">Rok rozpoczęcia pracy (OBOWIĄZKOWO)</label>
          <input
            type="number"
            id="start_year"
            name="start_year"
            min="1950"
            max="2100"
            required
            placeholder="Wpisz rok rozpoczęcia pracy (styczeń)"
          />
        </div>

        <div class="form-group">
          <label for="end_year"
            >Planowany rok zakończenia aktywności zawodowej (OBOWIĄZKOWO)</label
          >
          <input
            type="number"
            id="end_year"
            name="end_year"
            min="1950"
            max="2100"
            required
            placeholder="Wpisz planowany rok zakończenia (styczeń)"
          />
        </div>

        <div class="form-group">
          <label for="zus_funds"
            >Wysokość zgromadzonych środków na koncie i subkoncie w ZUS
            (FAKULTATYWNIE)</label
          >
          <input
            type="number"
            id="zus_funds"
            name="zus_funds"
            min="0"
            step="0.01"
            placeholder="Wpisz środki zgromadzone w ZUS"
          />
        </div>

        <div class="form-group">
          <label for="include_sick_leave">
            <input
              type="checkbox"
              id="include_sick_leave"
              name="include_sick_leave"
            />
            Uwzględniaj możliwość zwolnień lekarskich
          </label>
        </div>

        <!-- Dodatkowe pola jako pola tekstowe (dopełnienie liczby 10 pól - można dostosować) -->

        <div class="form-group">
          <label for="additional_1">Dane dodatkowe 1</label>
          <input
            type="text"
            id="additional_1"
            name="additional_1"
            placeholder="Dowolna informacja"
          />
        </div>

        <div class="form-group">
          <label for="additional_2">Dane dodatkowe 2</label>
          <input
            type="text"
            id="additional_2"
            name="additional_2"
            placeholder="Dowolna informacja"
          />
        </div>

        <button type="submit">Zaprognozuj moją przyszłą emeryturę</button>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Przykładowe dane grup emerytów - wysokość średniej emerytury (zł)
      const pensionGroups = [
        {
          name: "Poniżej minimalnej",
          value: 1200,
          description:
            "Świadczeniobiorcy otrzymujący emeryturę poniżej minimalnej mają niską aktywność zawodową, nie przepracowali minimum 25 lat dla mężczyzn i 20 dla kobiet, nie nabyli prawa do gwarancji minimalnej emerytury.",
        },
        {
          name: "W okolicach średniej",
          value: 2500,
          description:
            "Większość emerytów otrzymuje świadczenie bliskie średniej krajowej.",
        },
        {
          name: "Powyżej średniej",
          value: 4000,
          description:
            "Grupa emerytów z wyższymi świadczeniami, często z dłuższym okresem pracy lub wyższymi zarobkami.",
        },
        {
          name: "Najwyższe emerytury",
          value: 7000,
          description:
            "Najbogatsi emeryci, często osoby z długoletnią karierą lub specjalistycznymi umiejętnościami.",
        },
      ];

      // Losowa ciekawostka (przykładowa)
      const randomFacts = [
        "Czy wiesz, że najwyższą emeryturę w Polsce otrzymuje mieszkaniec województwa śląskiego, wysokość jego emerytury to 12 000 zł, pracował przez 45 lat, nie był nigdy na zwolnieniu lekarskim.",
        "Średnia długość zwolnień lekarskich w Polsce to około 30 dni rocznie.",
        "Emerytury w Polsce są corocznie indeksowane względem inflacji i wzrostu przeciętnych wynagrodzeń.",
        "Mężczyźni statystycznie przepracowują dłużej i mają wyższe emerytury niż kobiety.",
      ];

      // Init wykresu
      const ctx = document.getElementById("pensionChart").getContext("2d");
      const pensionChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: pensionGroups.map((g) => g.name),
          datasets: [
            {
              label: "Średnia wysokość emerytury (PLN)",
              data: pensionGroups.map((g) => g.value),
              backgroundColor: "rgba(0, 153, 63, 0.7)",
              borderColor: "rgba(255, 255, 255, 1)",
              borderWidth: 1,
              hoverBackgroundColor: "rgba(0, 153, 63, 1)",
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              ticks: { color: "white" },
            },
            x: {
              ticks: { color: "white" },
            },
          },
          plugins: {
            tooltip: {
              enabled: false, // wyłączamy domyślne tooltipy
              external: (context) => {
                const tooltipModel = context.tooltip;
                const groupInfo = document.getElementById("group_info");

                if (tooltipModel.opacity === 0) {
                  groupInfo.innerText = "";
                  return;
                }

                if (tooltipModel.dataPoints) {
                  const idx = tooltipModel.dataPoints[0].dataIndex;
                  groupInfo.innerText = pensionGroups[idx].description;
                } else {
                  groupInfo.innerText = "";
                }
              },
            },
          },
          hover: {
            mode: "nearest",
            intersect: true,
          },
        },
      });

      // Wyświetlanie losowej ciekawostki
      const randomFactElem = document.getElementById("random_fact");
      randomFactElem.textContent =
        randomFacts[Math.floor(Math.random() * randomFacts.length)];
    </script>
  </body>
</html>
